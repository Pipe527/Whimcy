<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../Css/style.css" rel="stylesheet" type="text/css" media="all" />
    <link href="../Css/ocations.css" rel="stylesheet" type="text/css" media="all" />
    <script src="https://kit.fontawesome.com/b59d19b6f4.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- Perfil -->
    <script src="../JS/Perfil.js"></script>
    <title>Ocaciones</title>
</head>
<body>
    <header class="header superior"> </header>
    <div class="Fondo-body">
        <div class="snow"> </div>
        <h3 class="w3ls-title w3ls-title1">Ofertas del mes</h3>
        <div class="card-date" id="date">
            <div class="card-content">
                <div class="column-content">
                    <div class="izquierdo">
                        <a href="products.php" class="bg1-link"><img src="../images/bg1.jpg" alt="BG1" class="img-card" id="imgA"></a>
                    </div>
                    <div class="derecho">
                        <a href="products.php" class="bg2-link"><img src="../images/bg2.jpg" alt="BG2" class="img-card" id="imgB"></a>
                    </div>
                </div>
                <div class="card-text">
                    <h3 class="text-card">Â¡Apareceran ofertas en tus dÃ­as especiales!</h3>
                    <a href="offers.html" class="ofertas">Ofertas diponibles</a>
                </div> 
            </div>  
            
        </div>  
        <h3 class="par-title">Â¡Visita Tastely tus dÃ­as especiales!</h3>
    </div>

    <!-- Footer -->
    <footer class="inferior"> </footer>
    <!-- Reajustes -->
	<style>
       .footer {
            padding-top: unset;
            background: unset;
            height: unset;
        }
        .address-right {
            top: -3em;
        }
        .address-left {
            bottom: 0.2vh;
        }
        .address-left ul li {
            margin: unset;
        }
        .Fondo-body {
            position: relative;
            background-color: #631f1fdb;
            z-index: 0;
        }
        h3[class*="title"] {
            color: aquamarine;
        }
        h3.w3ls-title.w3ls-title1 {
             padding: .7em 0 0;
             margin: auto !important;
        }
	</style>
    <!-- Scripts -->
    <!-- cart-js -->
	<script src="../JS/minicart.js"></script> 
	<script src="../JS/StartCart.js"></script>
	<!-- //cart-js -->
    <!-- Obtener Fecha -->
    <script src="../JS/Fecha.js"></script>
    <!-- submenus -->
	<script src="../JS/SubMenus.js"></script>
	<script src="../JS/Assest/sessionManager.js"></script>
    <!-- Fecha de ocaciÃ³n -->
    <script>
    const header = document.querySelector(".header");
    const footer = document.querySelector(".inferior");
    const banner = document.getElementById("date");
    const titulo = document.querySelector(".w3ls-title1");
    const subtitle=document.querySelector(".par-title");
    const content =document.querySelector(".text-card");
    const boton =document.querySelector(".ofertas");
    const linkA = document.querySelector(".bg1-link");
    const linkB = document.querySelector(".bg2-link");
    const imgA = document.getElementById("imgA");
    const imgB = document.getElementById("imgB");
    const { day, month } = getFecha();
    console.log("La fecha es: "+ day +"/ "+ month);

        if (month === 12) {
         banner.style.backgroundImage = 'url("../images/navidad.png")';
         titulo.innerText = "Para AÃ±o Nuevo";
         subtitle.innerText = "Â¡Feliz Navidad!";
         boton.innerText = "Â¡Comprar ahora!";
         boton.setAttribute("href","products.php?data-cat=navidad");
         content.innerText = "Â¡Un 50% de descuento en productos navideÃ±os!";
         imgA.setAttribute("src","../images/g17.png");
         imgA.style.objectFit = 'contain';
         imgA.style.backgroundColor = 'darkgreen';
         linkA.setAttribute("href","products.php?data-cat=navidad");
         imgB.setAttribute("src","../images/g18.png");
         imgB.style.objectFit = 'contain';
         imgB.style.backgroundColor = 'darkgreen';
         linkB.setAttribute("href","products.php?data-cat=navidad");
        } else if (month === 10 && day === 31) {
         header.style.filter = 'hue-rotate(-150deg)';
         footer.style.filter = 'hue-rotate(-150deg)';
         banner.style.backgroundImage = 'url("../images/halloween.jpg")';
         titulo.innerText = "Halloween";
         subtitle.innerText = "Â¡Feliz Halloween!";
         boton.innerText = "Â¡Comprar ahora!";
         boton.setAttribute("href","products.php?data-cat=gift");
         content.innerText = "Â¡Un 50% de descuento en regalos!";
         imgA.setAttribute("src","../images/g19.png");
         imgA.style.objectFit = 'contain';
         imgA.style.backgroundColor = '#a95e03';
         linkA.setAttribute("href","products.php?data-cat=gift");
         imgB.setAttribute("src","../images/g20.png");
         imgB.style.objectFit = 'contain';
         imgB.style.backgroundColor = '#a95e03';
         linkB.setAttribute("href","products.php?data-cat=gift");
        } else if (month === 2 && day === 14) {
         header.style.filter = 'hue-rotate(180deg)';
         footer.style.filter = 'hue-rotate(180deg)';
         banner.style.backgroundImage = 'url("../images/sanValentin.jpg")';
         titulo.innerText = "San Valentin";
         subtitle.innerText = "Â¡Feliz San Valentin!";
         boton.innerText = "Â¡Comprar ahora!";
         boton.setAttribute("href","products.php?data-cat=gift");
         content.innerText = "Â¡Un 50% de descuento en regalos!";
         imgA.setAttribute("src","../images/g19.png");
         imgA.style.objectFit = 'contain';
         imgA.style.backgroundColor = 'darkgreen';
         linkA.setAttribute("href","products.php?data-cat=gift");
         imgB.setAttribute("src","../images/g20.png");
         imgB.style.objectFit = 'contain';
         imgB.style.backgroundColor = 'darkgreen';
         linkB.setAttribute("href","products.php?data-cat=gift");
        } else {
         banner.style.backgroundImage = 'url("../images/Offers.jpg")';
         banner.style.filter = 'hue-rotate(-18deg)';

         const params = new URLSearchParams(window.location.search);
         const normalDay = params.get("normalDay");

         if (normalDay === "1") {
             mostrarAvisoNavidad();
         }
        }

        function mostrarAvisoNavidad() {
            const aviso = document.createElement("div");
            aviso.className = "aviso-navidad";
            aviso.innerHTML = `
                <div class="aviso-card">
                ðŸŽ„ <strong>Â¡PromociÃ³n Especial!</strong><br>
                Â¡Un 50% de descuento en productos navideÃ±os! <br>
                <p class="text-card">Â¡Visita <b>TASTELY</b> en Navidad!</p> <br>
                <a href="offers.html" class="btn-aviso">Ver ofertas actuales</a>
                </div>
            `;
            document.body.appendChild(aviso);

            setTimeout(() => aviso.classList.add("visible"), 100);
            setTimeout(() => aviso.remove(), 10000);
        }
    </script>
    <!-- Importar el Menu /HTML -->
	<script>
		document.addEventListener("DOMContentLoaded", async () => {
			try {
				const response = await fetch("/whimcy/Views/Menu.php");
				if (!response.ok) throw new Error("Error al cargar Menu.php");

				const html = await response.text();
				document.querySelector(".header").innerHTML = html;
				
				// Activar scripts del menÃº
				if (typeof inicializarHeaderNav === "function") inicializarHeaderNav();
				if (typeof inicializarLogin === "function") inicializarLogin();
                if (typeof getFecha === "function") getFecha();
				setTimeout(() => {
					if (typeof StartCart === "function") StartCart();
				}, 200);

			} catch (err) {
				console.error(err);
			}
		});
	</script>
    <!-- Importar el footer HTML -->
    <script>
        $(function () {
            $(".inferior").load("/whimcy/Views/Footer.html", function () {
            $.getJSON("/whimcy/Controllers/CheckSesion.php", function (response) {
                if (response.loggedIn) {
                $('a[href="login.html"]').on("click", function (e) {
                    e.preventDefault();
                    window.location.href = "/whimcy/Views/Mobile/profile.php";
                });
                }
            }).fail(function (err) {
                console.error("Error verificando sesiÃ³n:", err);
            });
            });
        });
    </script>

	<!-- Enlaces dinamicos/ Movil -->
	<script>
	function redirigirLogin(e) { 

        if (window.matchMedia("(max-width: 400px)").matches) {
			e.preventDefault();
            window.location.href = "Mobile/Inicio.php";
        } else {
            window.location.href = "login.html";
        }
    }
	</script>    
</body>
</html>